<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>memberSecession</title><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
    <script src="https://kit.fontawesome.com/950ccfa2a8.js" crossorigin="anonymous"></script>
    
    <style>
        h1 { text-align: center; margin-top: 3% }
        h2 { margin-top: 3% }
        h3 { text-align: right; margin-top: 3%; margin-right: 15% }
    </style>
    
</head>
<body>
<div id=main style="margin-top: 3%; margin-left: 3%">
    <h1 style="display: inline;"><strong>CSR</strong></h1>
    <h3 style="display: inline;">&nbsp<strong>마이페이지</strong></h3>
    <img  src="home.png" style="width: 5%; float: right; margin-right: 50px;" onclick=location.href='index.html'>
 

</div>

<!-- 메뉴 창 -->
<div id="menu" style="margin-top: 3%; margin-left: 3%;">
    <h4 style="display: inline; margin-right: 3%; color:#5E42A6;" onclick=location.href='member_information.html'><strong>회원정보 변경</strong></h4>
    <h4 style="display: inline; margin-right: 3%" onclick=location.href='card_registration.html'><strong>카드 등록</strong></h4>
    <h4 style="display: inline; margin-right: 3%" onclick=location.href='card_change.html'><strong>카드 변경</strong></h4>
    <h4 style="display: inline; margin-right: 3%" onclick=location.href='reservationHistory.html'><strong>예약내역</strong></h4>
    <h4 style="display: inline; margin-right: 3%" onclick=location.href='memberSecession.html'><strong>회원 탈퇴</strong></h4>
</div>
<hr style="margin-top: 2%; margin-bottom: 2%">

<div style="margin-top: 3%">
    <i style="margin-left: 5%" class="far fa-user fa-3x"></i>
    <h5 style="display: inline; margin-left: 3%"><strong>휴대폰 번호 변경</strong></h5>
</div>


<div style="width: 60%; padding: 20px; border: 1px solid gray; margin: 3%">
   <dt class="nick" >
      <span>휴대폰 번호 변경</span>
    </dt>
   <dd>
       <div class="block">
           <input type="text" name="user_nick" id="user_nick" class="txt placeholder"
           placeholder="010-xxxx-xxxx" maxlength="13"
           onkeypress="if(event.keyCode==40||event.keyCode ==41)
           event.returnValue=false;" onkeydown="chkLength(this, 12, 'nick');"
           onpaste="return false">
           <button class="btn_db" onclick="return checkNickName();">인증번호 요청</button>
           
       </div>
       
   </dd> 
</div>
<div style="margin-top: 3%">
    <i style="margin-left: 5%" class="fas fa-unlock fa-3x"></i>
    <h5 style="display: inline; margin-left: 3%"><strong>비밀번호 변경<strong></h5>
</div>
<div style="width: 60%; padding: 20px; border: 1px solid gray; margin: 3%">
    <dt class="nick" >
       <span>비밀번호</span>
     </dt>
     <dd>
         <div class="block">
             <input type="password" name="password" class="txt" placeholder="현재 비밀번호" maxlength="6"
             onkeypress="return checkData(this, event, 15, 0, 1);" onkeyup="return checkHangleData(this);">
             <span class="ierror ifxts">숫자 6자리로 입력해주세요.</span>
         </div>
         <br>
         <div class="block">
            <input type="password" name="new_password1" class="txt" placeholder="새 비밀번호" maxlength="6"
            onkeypress="return checkData(this, event, 15, 0, 1);" onkeyup="return checkHangleData(this);">
            <span class="ierror ifx">숫자 6자리로 입력해주세요.</span>
        </div>
        <br>
        <div class="block">
            <input type="password" name="new_password2" class="txt" placeholder="새 비밀번호" maxlength="6"
            onkeypress="return checkData(this, event, 15, 0, 1);" onkeyup="return checkHangleData(this);">
            <span class="ierror ifx2">숫자 6자리로 입력해주세요.</span>
        </div>
        <br>
        <p class="itxt">
            비밀번호를 변경하면 현재 기기를 제외한 연결된 기기에서 로그인 계정이 모두 로그아웃됩니다.
        </p>
</div>
<div style="width: 200px; height: 40px; margin-top: 2%; margin-left: 25%">
    <form style="float:left;margin:0;">
        <button type="submit" class="btn btn-secondary">돌아가기</button>
    </form>
    <form style="float:right;">
        <button type="submit" class="btn btn-primary">변경하기</button>
    </form>
</div>
</body>

<script>
    //작성자: 변유진
    //목적: 회원 정보 변경 값
    //되돌아오는 값: 

    var post_nickname = document.getElementById("change_nick");
    var post_password = document.getElementById("password");//기존 로그인과 회원가입할 때의 비밀번호
    var post_password1 = document.getElementById("new_password1");
    var post_password2 = document.getElementById("new_password2");
    var post_password3 = document.getElementById("new_password3");

    function changeInfo(){
        if(post_nickname.value.length == 0){
            alerted(function(){return;}, "", "휴대폰 번호를 입력해주세요.", "warning");
                return;
        }
    }

        if ( post_password1.value != post_password.value ){
            alerted(function(){return;}, "", "기존 비밀번호가 다릅니다.", "warning");
             return;
        }

        if ( post_password1.value.length == 0 || post_password2.value.length || post_password3.value.length == 0 ){
            alerted(function(){return;}, "", "패스워드를 입력해주세요.", "warning");
                return;
        }

        if ( post_password2.value != post_password3.value ){
            alerted(function(){return;}, "", "패스워드가 서로 다릅니다.", "warning");
             return;
        }
        

        var data = new FormData();
        data.append("func", "change_check");
        data.append("post_nickname", name.value);
        data.append("post_password1", password1.value);
        data.append("post_password2", password2.value);
        data.append("post_password3", password3.value);
        
        POST("design_pattern_web.php", data, function(resp) {
            console.log(resp.data);

            if(resp.data == "passwords_wrong"){
                alerted(function(){return;}), "패스워드가 서로 다릅니다.", "warning";
                retrun;
            }

            if(resp.data == "change_ok"){

            }
        });

</script>
</html>
     